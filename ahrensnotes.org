#+STARTUP: entitiespretty

Jupyter notebook server on the janelia cluster: http://h06u22.int.janelia.org:9999
* Thesis project
- Misha thinks that the dorsal raphe nucleus stores the motor memory trace so the idea is to shut down the whole brain EXCEPT the dorsal raphe nucleus to see if we can find the memory trace there. If the ramping up activity of the dorsal raphe nucleus goes down immediately, then it is likely that the memory trace is stored somewhere else. If the dorsal raphe nucleus activity lingers on and still spots a decaying activity, which is the stereotyped activity without any shutting down, then we can begin to think of the memory trace as being internally represented in this brain structure.
- There are three stages to this project:
  1) Technical demonstration that the optogentics and calcium indicator set up works and is able to carry out the above investigation.
  2) Look at the resultant dorsal nucleus activity to see if we can find the memory trace there -- as above.
  3) Find out if the resultant activity is due to a single neuron computation or a network computation. The experiment here is to inactivate half the neurons. If the non-inactivated neurons respond in the same way as before, then this suggest that this might be more of a single neuron computation. If the non-activated neurons respond in a different way, or in a way that suggests that it no longer represents the memory trace, then perhaps the network supports this computation.
* Rotation project (8 weeks)
1. Get used to the behaviour paradigm
2. Check the DRN line for channelrhopsin expression
3. Check what the phenotype is when DRN is optogenetically stimulated
* Things to learn / do
- Fish: taking care of them
- Computing: Matlab, Python, C#
- Preparation of fish: paralysis, embedding
- Fictive swimming
- Microscopy/optogenetics
- Knowledge: anatomy, transgenesis
* 17APR22 Skype meeting: confirmation of rotation and discussion of project
** Logistics
- Dates: 19 Jun - 11 Aug (8 weeks)
- Housing is a bit tight but shouldn't run into problems. The worst thing that can happen is to have to move out of one apartment into another.
- "Once Misha and HR have agreed on your employment, a letter of offer will be prepared." Misha will let HR know that he is agreeable to this, the director of Janelia has to agree (sign on the dotted line) and then HR will produce the offer letter. Misha thinks that I can expect to hear back next week.
** Project
- I would be interested something to do something involves light sheet microscopy.
- The project we agreed on ("that has the potential to become very interesting") is to look at decision-making in the zebrafish. By providing the zebrafish with conflicting and varied signals, we can investigate the properties of the stimuli to cause the zebrafish to make one decision or the other, for example to turn left or to turn right. Once we know how to control the decision-making process of the zebrafish, we will be able to influence their decision-making at will, which will be helpful later when looking for their neural correlates.
- We want to provide conflicting signals after the animal has decided to move left or right, such as arrows pointing the other direction. The zebrafish doesn't like dark stimulus. We can vary the intensity of the original stimulus (the "darkness") to see how it affects the zebrafish's commitment to the initial stimulus, as compared to the standard conflicting one (the arrows).
- If I get far enough, I will be able to use light sheet microscopy to investigate the neural correlates of decision-making. While we vary the sensory stimulus to cause the animal to have a change in decision, there should be a point where the analog representation of the stimulus becomes digital: turn left or turn right. Misha thinks that this happens somewhere in the hindbrain, but he wouldn't put too much money on it.
** Homework
- Learn C#: In order to be able have to closed-loop system that controls the behaviour of the zebrafish, we need to be able to change the visual stimulus quickly right after the animals has made a commitment to move in a certain direction. To do that, the lab uses C# to understand the behaviour of the animal and change the visual stimulus accordingly.
* 17JUN03 Skype meeting: discussion potential projects
** Agenda [1/2]
- [X] Confirm project
- [ ] Find out the dates that Misha will be away
** Project
- Misha propsed two projects, one that we went through the other time (regarding decision-making with conflicting stimuli) and the other is the one described below.
- Misha thinks this second project has a higher risk because it requires a great deal of technical know-how. He gave me a choice -- high risk, high return. I guess I was never deterred to do highly technical projects, maybe because I haven't been exposed to one, but maybe also because I tend not to think so much about the consequences/failing.
- He told me that he doesn't want me to be unhappy / have a bad time doing the project, but if I was not risk-averse, it's actually a very interesting project to take on. I told him I would treat it as an experience if it were to fail so there's nothing he has to worry about.
- I told him I would be more interested to work on the newly propsed project (see details below) since it's got to do with mechanisms, dynamics and computations.
- Misha thinks that the dorsal raphe nucleus stores the motor memory trace so the idea is to shut down the whole brain EXCEPT the dorsal raphe nucleus to see if we can find the memory trace there. If the ramping up activity of the dorsal raphe nucleus goes down immediately, then it is likely that the memory trace is stored somewhere else. If the dorsal raphe nucleus activity lingers on and still spots a decaying activity, which is the stereotyped activity without any shutting down, then we can begin to think of the memory trace as being internally represented in this brain structure.
- There are three stages to this project:
  1) Technical demonstartion that the optogentics and calcium indicator set up works and is able to carry out the above investigation.
  2) Look at the resultant dorsal nucleus activity to see if we can find the memory trace there -- as above.
  3) Find out if the resultant activity is due to a single neuron computation or a network computation. The experiment here is to inactivate half the neurons. If the non-inactivated neurons respond in the same way as before, then this suggest that this might be more of a single neuron computation. If the non-activated neurons respond in a different way, or in a way that suggests that it no longer represents the memory trace, then perhaps the network supports this computation.
- Things to do and learn: 
  - The first thing to do is to be able to work with zebrafishes and to use it to carry out motor learning tasks. It takes about a week (often more) to be comfortable with working with these fishes.
  - There's also python to learn; not so much C sharp now since the code for the VR part of this experiment has already been written.
* 17JUN19 Day 1: tried my hand at electrode preparation, paralysis, fish embedding and fictive behaviour
** What have I brought to my work desk?
- [ ] 2X US adaptors
- [ ] Surface Pro charger
- [ ] Z3 charger
- [ ] logitech MX Master
- [ ] logitech K380 keyboard
** DONE Tried my hand at electrode preparation, paralysis, fish embedding and fictive behaviour
** DONE Take note of the fictive behaviour and fish maintenance protocols
CLOSED: [2017-06-19 Mon 22:05] SCHEDULED: <2017-06-19 Mon>
- State "DONE"       from "TODO"       [2017-06-19 Mon 22:05]
- State "TODO"       from              [2017-06-19 Mon 20:47]
** DONE Take down some notes about the voltage imaging that Takashi is doing
CLOSED: [2017-06-19 Mon 23:32]
- State "DONE"       from "TODO"       [2017-06-19 Mon 23:32] \\
  See: [[file:drn_mem.org::*Voltage%20imaging%20using%20a%20artificial%20biosensor][Voltage imaging using a artificial biosensor]]
- State "TODO"       from              [2017-06-19 Mon 20:48]
** Discussed voltage imaging using a artificial biosensor with Takashi
See: [[file:~/universe/imaging.org::*Voltage%20imaging%20using%20a%20artificial%20biosensor][Voltage imaging using a artificial biosensor]]
- GFP and many of the other naturally-occuring biosensors are kind of slow -- about 300 ms.
- Whole brain imaging of voltage sensors is done at 300 Hz, which means that the sampling is done every 3.3 ms.
- When sampling at such high speeds, another concern is the level of fluoresence. Because sampling is done so quicky, the exposure time is short and therefore the samples don't quite light up as much.
- Therefore, better biosensors that perform better on the time resolution must be used.
- The current voltage sensor that Takashi is testing is very fast ~30 ms.
* 17JUN20 Performed the whole fictive behaviour experiment on my own and learnt how to make experimental notes
** DONE Complete Workday action items, especially the direct credit authorization form
CLOSED: [2017-07-15 Sat 00:05] SCHEDULED: <2017-06-20 Tue>
- State "DONE"       from "URGENT"     [2017-07-15 Sat 00:05] \\
  - Was told by Dani that I don't need to redo my Federal and State Tax Election forms after rectifying my SSN.
  - Finally completed all my workday items!
- State "URGENT"     from "TODO"       [2017-06-22 Thu 09:49]
- State "TODO"       from              [2017-06-20 Tue 09:48]
** Making experimental notes
- Date of experiment
- Task structure: basically the experimental paradigm (e.g. 20s switch between low and high gain)
- Age of fish
- Gain: setting in the software
- Adaptation
- Behaviour: Is the swim good?
** Lab outing: hike at Great Falls
* 17JUN21 Practiced the fictive behaviour experiment
** Practiced pulling the pipette, zebrafish paralysis and recording fictive behaviour
- Was able to record fictive behaviour in electrode 1 and not so successfully in electrode 2 -- unclear bouts.
** Director's welcome dinner at Gerry Rubin's place
* 17JUN22 Practiced the fictive behaviour experiment
** Got Takashi to fix the loose micromanipulator
** Practiced pulling the pipette, zebrafish paralysis and recording fictive behaviour
- Worked with 3-4 fishes, but wasn't successful in completely recording the fictive behaviour.
- Was able to observe swim bouts in one of the electrodes for two out of the four attempts.
- Electrode 2 seems to be the problem -- have not successfully recorded from it yet.
** Misha meeting: discussed project again
- Told Misha about Takashi's plan for me
- Misha to implement two slots a day on the light sheet microscope
- Misha explained the light field microscope to me
- Misha explained how we could use the new optogenetics-enabled transgenic line by a clever trick: subtracting signals from different channels and with/out the DMD
** CANCELED Think about project ideas using the DMD
CLOSED: [2017-07-04 Tue 23:47]
- State "CANCELED"   from "TODO"       [2017-07-04 Tue 23:47] \\
  Now working on understanding the oscillations Alireza found
- State "TODO"       from              [2017-06-23 Fri 00:13]
** DONE Complete Certification of HHMI's Policies by 7/3/2017 (see email)
CLOSED: [2017-06-22 Thu 21:36] SCHEDULED: <2017-06-22 Thu>
- State "DONE"       from "TODO"       [2017-06-22 Thu 21:36] \\
  Only viewable over Janelia's network; but completed.
- State "TODO"       from              [2017-06-22 Thu 09:50]
** DONE Complete time sheets on myHHMI
CLOSED: [2017-06-23 Fri 08:57] SCHEDULED: <2017-06-23 Fri>
- State "DONE"       from "TODO"       [2017-06-23 Fri 08:57]
- State "TODO"       from              [2017-06-22 Thu 09:51]
* 17JUN23 Practiced the fictive baheviour experiment and talked to Misha about the optics of the two-photon microscope
** DONE Make an appointment to do the free eye exam
CLOSED: [2017-06-26 Mon 21:34]
- State "DONE"       from "STARTED"    [2017-06-26 Mon 21:34] \\
  Going for one at 11 Jul
- State "STARTED"    from "TODO"       [2017-06-23 Fri 20:39] \\
  Asked if I am eligible for the free eye exam...
- State "TODO"       from              [2017-06-23 Fri 19:20]
** DONE Finish setting up Janelia VPN
CLOSED: [2017-06-23 Fri 20:31]
- State "DONE"       from "TODO"       [2017-06-23 Fri 20:31] \\
  Finished setting up VPN and also realize that I have access to the SECURE network just by using my janelia username and password
- State "TODO"       from              [2017-06-23 Fri 19:21]
** TODO Note down microscope basics -- two-photon, light sheet -- in [[file:~/universe/optics.org][optics wiki]]
- State "TODO"       from              [2017-06-23 Fri 19:17]
** TODO Note down two-photon imaging protocol
- State "TODO"       from              [2017-06-23 Fri 19:20]
** TODO Note down Misha's ideas to fix the YFP signal coming out of the zebrafish line we are using
- State "TODO"       from              [2017-06-23 Fri 22:19]
* 17JUN24 Got the Anaconda installation right and decided to use Visual Studio IDE for C# programming
** Davis introduced me to the fictive behaviour recording software
** DONE Get a stable version of the source code for the fictive behaviour software from Takashi
CLOSED: [2017-07-01 Sat 23:42]
- State "DONE"       from "TODO"       [2017-07-01 Sat 23:42] \\
  See: [[file:~/fictive]]
- State "TODO"       from              [2017-06-24 Sat 20:01]
** Couldn't find Anaconda prompt or Anaconda navigator
** Reinstalled Anaconda to find that Anaconda wasn't properly added to the menu
** Some people complained that Windows only allowed path variables up to 1024 characters
- This wasn't my problem because I wasn't even trying to add to the PATH
- However, this might be a problem for the creation of desktop and start menu shortcuts
** Reinstalled Anaconda to C:\Anaconda3\ instead of C:\Users\JingXuan\Anaconda3\
- Despite this, still cannot install, probably Avast blocking its action, thinking that it's an IDP attack...
- Realised that this was a problem that I also encountered earlier
** Reinstalled Anaconda but with Avast disabled and succeeded: Anaconda shortcuts are now in the start menu (but not on the desktop)
- Forgetting about the Desktop
** Should I still stick to Emacs for C# programming? No, use Visual Studio IDE.
- Emacs + Omnisharp is the way to go for programming C# on Eamcs. Any other setup probably requires a lot more time and effort to setup.
- Even with Omnisharp, Emacs still lacks in functionality when compared to Visual Studio IDE. Visual Studio IDE, while being a general Windows IDE, has many functions just made for C#. Emacs doesn't carry those functions.
- Visual Studio Code is still far away in functionality when compared to Visual Studio IDE. Use Visual Studio IDE.
- The remaining question now is if I have access to the Professional and Enterprise versions. If not the free Community version seems fine. I should also check with the rest of the group what version they use.
** DONE Get the denoising script for Takashi
CLOSED: [2017-07-01 Sat 23:42]
- State "DONE"       from "TODO"       [2017-07-01 Sat 23:42] \\
  Here: [[file:process_ephys_spectrumanalysis.py]]
- State "TODO"       from              [2017-06-24 Sat 20:01]
* 17JUN25 First try on the old two-photon rig
** Tried out the old two-photon rig because the resonant two-photon rig's software is broken
** TODO Note down what are the three main things to change in the code in order to add a GUI tool to change the position of the VR
- State "TODO"       from              [2017-06-25 Sun 21:07]
** TODO Finish up recording the protocol for two-photon calcium imaging
- State "TODO"       from              [2017-06-25 Sun 21:09]
Quick link: [[file:~/universe/protocols.org::*Zebrafish:%20Two-photon%20calcium%20imaging%20(Ahrens%20Lab)][Zebrafish: Two-photon calcium imaging (Ahrens Lab)]]
** TODO Note down my understanding of fish species and their crosses
- State "TODO"       from              [2017-06-25 Sun 21:22]
** KIV Might be a good idea to tag along in the building of the light field microscope (Kasper) or the second light sheet microscope (no takers) if I do do my thesis research in the Ahrens lab
- State "KIV"        from              [2017-06-25 Sun 21:34]
** DONE Confirm with Takashi what the switch at the bottom of machines do -- is it the camera manipulator or the 2-photon microscope?
CLOSED: [2017-06-26 Mon 23:07] SCHEDULED: <2017-06-26 Mon>
- State "DONE"       from "TODO"       [2017-06-26 Mon 23:07] \\
  That's for the galvo! The camera manipulator is permanently switched on.
- State "TODO"       from              [2017-06-25 Sun 21:53]
** TODO Find out what is the camera software on the resonant 2-photon microscope, how to collect data, and how to use the ROI function
- State "TODO"       from              [2017-06-25 Sun 22:18]
* 17JUN26 Organisational lab meeting
** Lab meeting: Revamping the organisational structure of lab function
*** Code repository
- Github account: ahrens-lab:teamfish@2016
*** Building a new microscope
- considering SCAPE versus regular light sheet microscope, but SCAPE is not possible
- Should go down to look at ID&F's lattice light sheet microscope as an inspiration for building something very compact
- Davis: we need more chambers | everyone think throne in chamber 2 is the best
*** Fish maintenance
- Discard the fishes properly
- Pipette aid filter can be bought in the fishy store
- AB fish vs WIK fish; not doing crosses within siblings
- Fishes should last for ~4 hours during experiments; any less and they might be unhealthy
- If you're doing experiments at midnight, you might want to use fishes that are adaptaed to a reverse light cycle. They wake up with light but their behaviour might not be normal.
- Reducing fishes: At day 2/3 you can start throwing out the pigmented fish.
- Use the fishes that are not easily caught with a pipette. So try catching them first, and use the ones that you cannot catch.
- Still a good idea to screen before the experiment -- those bright at day 3 are not necessarily going to be bright at day 6.
- You should also check that the motor adaptation works before starting the experiments.
- If you have a bunch of bad fish, whine and get fishes from someone else.
*** Misha's meeting notes
_organization of code using lab github_
- lab has paid account
- individuals contribute to private lab repositories by being collaborators
- individuals don’t have their own repositories
- davis will check that everything is private
- davis will make repositories on lab account for each person
- include behaveandscan repository, organized into branches (e.g. behaveandscan_spim)

_light sheet schedule_
- start ~6 am, end ~3 am
- two (or three) slots per day
- I realize these are early starts and late nights, but please can everyone follow such schedules to maximize the time for other people.
(i.e. if you start at 9 instead of 6 then treat it was 3 hours lost for someone else.)
- ** I (Misha) will be there for anyone who wants help or company or wants a fellow sufferer at 6 am or 3 am **
- people with preferences: Takashi: morning, Virginia: morning, Jing: night, En: night, Maarten: daytime b/c shuttle
- ** if you don’t have enough time on the microscope, talk to Misha **
- important: *** use reverse-lightcycle incubator for late experiments ***
- to save time: new person prepares fish while previous person is finishing
- we use the slack channel #equipment_sharing for such scheduling
- we need more chambers - Davis will revive lost art of making chambers, everyone needs their own chamber (throne in chamber 2)
- we may want to build a new microscope, but someone needs to dedicate themselves to it. Ideas include
- a compact light-sheet (with help of ID&F)
- SCAPE (can ask E. Hillman for design)
- light field

_organization_
- make sure rigs don’t change by moving equipment, otherwise alert people through #equiment_sharing
- in general: tidy up, leave in the same or better state as how you found it, including fish feeding area, euthanasia flask, and screening scope
- need to tidy up behavior room, but need new furniture, space; next to the sink withs splash screen? order transparent drawers?
- ask Sarah-Ann for spare room for optics equipment

_fish care_
- get WIK fish for outcrosses
- density of embryos: 30 fish/dish, throw away embryos if needed, or use bigger dish
- reverse light cycle incubator for late experiments
- screen twice (~3 dpf, and just before experiment) and select for good swimming fish
- use motor adaptation for testing good behavior
- make sure you don’t use lame, easy to catch fish
- fish swimming near the water surface are often better
- put water bottle back in incubator

_lab fruit_
- each person buys when they want, puts it on Yu Mu’s or Alireza’s desk, and asks Sarah-Ann for reimbursement from morale budget
(if it becomes too expensive we’ll deal with it then)
- an apple a day keeps the doctor away
** TODO Ask for introduction on microscope designs
- State "TODO"       from              [2017-06-26 Mon 10:13]
** DONE Subscribed to the Python and Neurotheory and Engineering mailing lists
** STARTED Figure out a way to subscribe to the J-Theory Group meetings, Neurotheory & Engin and System Neuroscience Seminars
- State "STARTED"    from "TODO"       [2017-07-13 Thu 23:29] \\
  - I don't think there's an actual way to do that... The calendars are all separate and I don't think there's a way to subscribe to them...
  - Emailed support to ask for help on this!
- State "TODO"       from              [2017-06-26 Mon 22:32]
- J-Theory: http://wiki.int.janelia.org/wiki/display/public/J-Theory+Group
- Neurotheory and Engineering: http://wiki.int.janelia.org/wiki/display/public/Neurotheory+and+Engineering
- System Neuroscience: http://wiki.int.janelia.org/wiki/display/public/Systems+Neuroscience+Seminar
- Main events calendar: http://wiki.int.janelia.org/wiki/display/intranet/Events+Calendar
* 17JUN28 Replaced the old Axon CNS amplifier to a new one on the old two-photon rig
** TODO Find out what regressors are 
- State "TODO"       from              [2017-06-28 Wed 11:04]
** DONE Find out what Davis meant by using ephys as master controller
CLOSED: [2017-07-13 Thu 01:03]
- State "DONE"       from "TODO"       [2017-07-13 Thu 01:03] \\
  What he is trying to say during the lab meeting was to just plot both the ephys and the imaging data without the need to downsample the ephys data if all you want is visualization...
- State "TODO"       from              [2017-06-28 Wed 11:45]
** DONE Find out what is trigger average
CLOSED: [2017-07-09 Sun 19:05]
- State "DONE"       from "TODO"       [2017-07-09 Sun 19:05] \\
  Swim-triggered (or any event else-triggered) just means whatever is happening up till and after the event...
- State "TODO"       from              [2017-06-28 Wed 11:45]
** Solved the sporadic ephys noise issue by changing to a new Axon CNS amplifier
* 17JUN29 Replaced the PMT amplifier and made my first complete recordings on the old two-photon rig
** Solved the image noise issue on the old 2-photon rig by changing the PMT amplifier
** Made my first complete recording -- ephys (fictive behaviour) + calcium imaging
* 17JUN30 Got started with data analysis by setting up my PC
** DONE Further denoised and tidied up the old 2-photon rig with Takashi
** Started data analysis process with Takashi
** Takashi gave me his version of the BehaveAndScan from the old 2-photon rig
** Quite difficult to analysis data on my personal computer for two reasons: (1) low disk space, (2) slow processing speed
** DONE Ask Davis about his data storage and analysis pipeline (+ the one he developed with Jeremy Freeman, + use of cluster computing to accelerate data analysis)
CLOSED: [2017-07-13 Thu 00:59]
- State "DONE"       from "TODO"       [2017-07-13 Thu 00:59] \\
  - so i think he works exclusively on the cluster
  - he stores his data on dm11
  - and he does all his computing on the cluster via either the ipython notebook or when he wants to visualize some imaging data, on a nomachine remote session
  - he wrote some code for Thunder for Jeremy Freeman and so there are bits and pieces of his pipeline which uses Thunder
- State "TODO"       from              [2017-06-30 Fri 20:07]
** CANCELED Complete discussion of analysis code with Takashi [0/1]
CLOSED: [2017-07-13 Thu 01:02]
- State "CANCELED"   from "TODO"       [2017-07-13 Thu 01:02] \\
  No longer planning on using Takashi's code to do my data analysis so no longer intend to talk to him about it...
- State "TODO"       from              [2017-06-30 Fri 20:12]
- [ ] Ask what is the difference between ~process_ephys.py~ and ~batch_process_ephys.py~
- [ ] Remind him to set up an account for me on his servers
** Discussed \Delta{}F/F with Misha over dinner
See: [[file:~/universe/imaging.org::*Why%20/Delta{}F/F%20instead%20of%20just%20/Delta{}F?][Why \Delta{}F/F instead of just \Delta{}F?]]
** [master fad41ec] removed all previous code and start anew -- added ephys and image files from takashi
 5 files changed, 881 insertions(+), 141 deletions(-)
 create mode 100644 image_register.py
 create mode 100644 imreg.py
 create mode 100644 process_ephys_spectrumanalysis.py
** [master e0c0565] cleaned up the python analysis files
 6 files changed, 131 insertions(+), 25 deletions(-)
** Renamed the ~fictive~ repository to ~ahrens~ and created a separate ~fictive~ repository for the BehaveAndScan code
* 17JUL02 Switched to Davis' data analysis setup
** Tried to use Takashi's code but it didn't work because of at least one missing dependency
- ~fast_ffts.py~, a dependency for ~im_reg.py~ was missing.
- There might be other dependencies that are missing...
** Davis introduced me to his code, which most of the lab is using
- Davis added me as a collaborator on three of his github repos so I have access to all of them.
** Started my own jupyter notebooks on the Janelia cloud
Instructions: [[file:~/dotfiles/dotwiki.org::*Set%20up%20Jupyter%20Notebook%20on%20a%20cluster%20(and%20work%20locally)][Set up Jupyter Notebook on a cluster (and work locally)]]
* 17JUL03 Started investigating oscillations in the waist area and if it has anything to do with the heart beat
** Technical lab meeting
- One fish year is two human days
- Try not to use terms that are already in the literature because then you will need to prove it
- Talk to Alirazar for his data
- Need to do near field stimulation or underwater speaker
- Misha suggested that we could just put a rod in
- gtacr experiment
- Also, put a drop of hot water -- it should affect the heart more than the brain
- Also try the experiment with the heart arrhythmia
- Poke into the heart during the experiment to slow it down
- 10 planes at 12 Hz, 15-100 ms for a reset is reasonable
- what is kosher?
- NMDA channels put into the inhibitory ramp cells
- Ex \twosides In \to premotor area
- Use mika code based on activity and TK based on shape
** Recording heartbeat in larval zebrafish
*** fish2-heart_06
- mode: gratings

_0 - 415 s_
- set 1: gain 0.005 vel 0.5 time 10
- set 2: gain 0.005 vel 0.5 time 10

_415 - s_
- set 1: gain 0 vel 0 time 10
- set 2: gain 0.005 vel 0.5 time 10

- behaveandscan crashed at around 600s

*** fish2-heart_08
- mode: gratings
- set 1: gain 0 vel 0 time 20
- set 2: gain 0 vel 0.5 time 20
- see 1 Hz oscilations in the axon bundles of the waist area
- heart rate is slightly higher than 1 Hz (~1.5 Hz)

*** fish2-heart_10
- mode: texture
- set 1: gain 0.005 vel 0 time 10
- set 2: gain 0.005 vel 0.5 time 10
- big group of cells in the top right of the waist area
- oscillations not obvious (due to differnet stimulus?)

*** fish2-heart_11
- mode: gratings
- set 1: gain 0.005 vel 0 time 10
- set 2: gain 0.005 vel 0.5 time 10
- oscillations not immediately obvious now
- heartbeat is also weakened

*** fish2-heart_12
- mode: gratings
- set 1: gain 0 vel 0 time 10
- set 2: gain 0 vel 0.5 time 10
- right after adding 0.8 ml of hot water
- at around 30s, improved recording quality by adding negative pressure
- heartbeat seemed to increased slightly to about 2Hz

*** fish2-heart_13
- mode: graings
- set 1: gain 0 vel 0 time 10
- set 2: gain 0 vel 0.5 time 10
- the heartrate is faster than before, but oscillations cannot be found

*** fish2-heart_14
- mode: texture
- set 1: gain 0 vel 0 time 10
- set 2: gain 0 vel 0.5 time 10
* 17JUL04 Reminder to version control stuff on the cluster because jupyter notebook has a bad undo/redo function
** TODO Ask Takashi about the inconsistent light sheet scanning movements and how it affects whatever he was trying to do
- State "TODO"       from              [2017-07-04 Tue 22:09]
** DONE Copy experimental notes to project
CLOSED: [2017-07-06 Thu 20:04]
- State "DONE"       from "TODO"       [2017-07-06 Thu 20:04] \\
  See: [[file:project.org::*Recording%20heartbeat%20in%20larval%20zebrafish][Recording heartbeat in larval zebrafish]]
- State "TODO"       from              [2017-07-04 Tue 22:09]
** DONE Version control the notebooks and other stuff that's on the cluster
CLOSED: [2017-07-12 Wed 13:25]
- State "DONE"       from "TODO"       [2017-07-12 Wed 13:25] \\
  Everthing is now in the ~ahrens~ repo, in the ~analysis~ folder.
- State "TODO"       from              [2017-07-04 Tue 22:09]
* 17JUL05 Tried to compute imaging times from my recent data
** Lab meeting, Mika's progress report: glia + giving up
- kosher is better at passing calcium, but don't know about channelrhodopsin.
- antidepressants improve the performance of the forced swim test; so this is required as a screen for new antidepressent drugs.
- want to use 'giving up' because the other terms are loaded in the literature and so have to prove it is the same.
- can try using SSRIs, TK tried and fish swam less.
- there are strain to strain variability in the forced swim test.
- might have to redo the factorisation because the task structure were all different, and the factorisation is derived from the whole time series.
- the factorisation might be a bit noisier because the time series is shorter (if remove unrelated task structures).
- think that glia is driving neural activity after giving up.
- suspect that glial cell activity onset can predict better giving up than amplitude of these events.
- want to establish causality between neuronal and glia activity. we think that neuronal activity is generated from rhythmic activity in glial.
- should subtract the motor component, which happens in both swim and no swim.
- you want to deconvolve neurons and not glial; indirect measure in neurons and direct measure in glial
- if you think the rise time is independent of the decay, then you have to put them independently in the model.
- want to deconvolve the waist with something above to get a smaller bump in the neuron activity.
** TODO What is factorisation?
- State "TODO"       from              [2017-07-05 Wed 11:06]
** TODO What is the calcium input response function?
- State "TODO"       from              [2017-07-05 Wed 11:46]
- need to convolve with the CIRF
** TODO What is a kernel?
- State "TODO"       from              [2017-07-05 Wed 11:48]
** [master 83be02c] commit before cloning on the janelia cluster
** [master e84a7f2] moved takashi's file into a dedicated folder
 6 files changed, 0 insertions(+), 0 deletions(-)
 rename ep.py => takashi/ep.py (100%)
 rename image_register.py => takashi/image_register.py (100%)
 rename imreg.py => takashi/imreg.py (100%)
 rename process_ephys.py => takashi/process_ephys.py (100%)
 rename process_ephys_spectrumanalysis.py => takashi/process_ephys_spectrumanalysis.py (100%)
 rename startup.py => takashi/startup.py (100%)
** [master 7bcee60] added ahrensnotes.org and moved all the ahrens admin notes from hopkins.org
** [master eabfe12] added analysis notebooks originally on the janelia cluster
** [master 03a8e19] added ahrenswiki.org
** DONE Try plotting time series using ROI using Davis's method
CLOSED: [2017-07-12 Wed 13:27]
- State "DONE"       from "TODO"       [2017-07-12 Wed 13:27] \\
  Davis' method is really easier to use! Was able to do it following the example he made on his repo: https://github.com/d-v-b/roi-drawing-example/blob/master/roi-drawing-example.ipynb
- State "TODO"       from              [2017-07-05 Wed 15:18]
** DONE Try out using matplotlib to visualize the electrophy data
CLOSED: [2017-07-06 Thu 00:30]
- State "DONE"       from "TODO"       [2017-07-06 Thu 00:30]
- State "TODO"       from              [2017-07-05 Wed 15:28]
** CANCELED Try visualzing the images using pyQt
CLOSED: [2017-07-13 Thu 01:08]
- State "CANCELED"   from "TODO"       [2017-07-13 Thu 01:08] \\
  Although you could use pyQt to make the calculations with your image data, I think ImageJ is the way to go if I want to interact with the data... You should be able to write reusable code and view the data the standard way (standard for what I'm doing now) which is to do it over a public server on jupyter. You can then visualize the data the using matplotlib then -- it won't be interactive but at least you don't have to code on a nomachine instance!
- State "TODO"       from              [2017-07-05 Wed 15:29]
** A stab at pywidgets
#+BEGIN_SRC 
from IPython.html.widgets import *

def seek(f):
    fig,ax = plt.subplots(figsize=(15,6))
    ax.plot(ep[0])
    ax.set_xlim([0+f*600, 6000+f*600])
    plt.show()

interact(seek, f=(0, 3500000/600, 1))
# interact(seek, tmax=(1, 3500000, 1))
#+END_SRC
* 17JUL06 Compute imaging and swim times with my data
** Figured out how to compute imaging times with Misha
** Used Davis' code to figure out swim times
* 17JUL09 Plotted the imaging times by finding the derivative of channel 3
** DONE Fill in timesheet for Janelia and tell Sarah-Ann about this
CLOSED: [2017-07-10 Mon 19:08] SCHEDULED: <2017-07-09 Sun>
- State "DONE"       from "TODO"       [2017-07-10 Mon 19:08] \\
  - Filled it in with Dani Munoz during the orientation
  - Sarah-Ann knows about this
- State "TODO"       from              [2017-07-09 Sun 00:32]
** DONE Visit HR to update Social Security Number
CLOSED: [2017-07-13 Thu 01:04]
- State "DONE"       from "TODO"       [2017-07-13 Thu 01:04] \\
  Updated my SSN 2 days ago with Dani Munoz at HR!
- State "TODO"       from              [2017-07-09 Sun 00:35]
** [master 3183fa2] plotted the imaging frames by finding the derivative of channel 3
** [master 377ea3e] added ahrensexpt.org to record experimental details
* 17JUL10 Implemented median filtering on my image data because it's so dark
** Median filtering notes
- Applying the median filter because a lot of my frames are dark. Adjusting brightness and contrast (e.g. using ImageJ) is able to solve this issue, but want to do it programmatically.
- Generally speaking, the higher the size of the median filter, the blurrer the processed image.
- However, there are some frames where the median filter can't fix due to the small size.
- In that case, I think size=3 is a good compromise between the two...
** CANCELED Make median filtering conditional -- only applicable to imaging datasets with contrast issues
CLOSED: [2017-07-12 Wed 13:45]
- State "CANCELED"   from "TODO"       [2017-07-12 Wed 13:45] \\
  Median filtering is not the right way to deal with the "noise" in my data. I just needed to limit the range of data i'd like to view with the ~clim~ argument of ~imshow()~ to ignore the super high values.
- State "TODO"       from              [2017-07-10 Mon 21:27]
* 17JUL11 Better directory listing
** DONE Print all files in directory, and their file sizes
CLOSED: [2017-07-11 Tue 11:43]
- State "DONE"       from "TODO"       [2017-07-11 Tue 11:43]
- State "TODO"       from              [2017-07-11 Tue 10:40]
** DONE Don't use indexing for data file selection; always specify the file you use
CLOSED: [2017-07-11 Tue 11:43]
- State "DONE"       from "TODO"       [2017-07-11 Tue 11:43]
- State "TODO"       from              [2017-07-11 Tue 10:42]
** [master d58fc1b] better directory listing
** [master 4b3dba6] used glob list directory to separate between imaging and ephys files
** [master 893f6cf] do not index / use an identical index for selecting ep and im files
** [master 730ce65] cleaned up code: forget about listdir
** TODO When filling up the stacks for each swim (i.e. swim-triggered image stacks), should use the last image instead of the first image
- State "TODO"       from              [2017-07-11 Tue 14:31]
** TODO Watch video about CRISPR: https://www.youtube.com/watch?v=2pp17E4E-O8
- State "TODO"       from              [2017-07-11 Tue 14:56]
** TODO Calculate delta F over F
- State "TODO"       from              [2017-07-11 Tue 18:25]
** TODO Register my image before calculaing delta F over F
- State "TODO"       from              [2017-07-12 Wed 13:48]
* 17JUL12 Started to work with modifying Davis' ROI drawing module
** Lab meeting: Minoru presents journal club
- feedforward circuit in the hindbrain brain allows sharpening of the output response by an addition of a feedforward circuit
- retinal ganglion cells: humans (0.1-0.2 deg), rabbits (3 deg), but there are other that enable you to see the whole field of view
- starburst amacrine cell don't fire; they just depolarize. each dendrite also acts as a individual computational unit that detect visual movement
- mutual inhibition of lateral inhibition -- non-linear enhancement of selective acitivty: optic tectum (barn owls), hindbrain escape circuit (zebrafish), retina (mouse)
- for the first -- receptive field broad, second and third -- receptive field highly tuned to certain stimuli -- main difference in property
** Lab meeting: Karina progress report
- always playing with threshold of the floor and ceiling so many some active learning of where the threshold is
- Minoru: maybe different mechanism for floor and ceiling since within the floor region, the fish is maybe trying to stay calm; while in the ceiling region, the fish might want to desparately right itself.
** DONE Modify RoiDrawing so can select between between rectangle and lasso selection tool
CLOSED: [2017-07-13 Thu 23:25]
- State "TODO"       from              [2017-07-12 Wed 22:34]
** TODO Modify RoiDrawing so that the lines, instead of the mask is plotted and overlaid over the image
- State "TODO"       from              [2017-07-12 Wed 22:34]
* 17JUL13 Implemented rectangular ROI on Davis' ROI drawing module
** Better to use the standard sized cell in jupyter

This is what you have to do to have full-sized ones though:

#+BEGIN_SRC 
from IPython.core.display import display, HTML
display(HTML("<style>.container { width:100% !important; }</style>"))
#+END_SRC

** Reshaped all image plots using aspect ratio
** Implemented drawing a rectangular ROI
- very buggy but works (for now)
- don't completely understand the behaviour of ~Button.on_clicked~ -- it doesn't allow me to invoke a rectangle selection tool but didn't block plotting
- the workaround / temp solution to this was to implement a second "activator", which is to click once more on the axes -- before the selector is activated
* 17JUL14 Implemented baseline filtering on the electrophysiology data
** DONE Perform baseline filtering on ephys data
CLOSED: [2017-07-15 Sat 00:06]
- State "DONE"       from "TODO"       [2017-07-15 Sat 00:06] \\
  Used peakutils.baseline() to which fit a n-degree polynomial to the minimas and subtract that polynomial from the signal...
- State "TODO"       from              [2017-07-14 Fri 14:35]
** TODO Implement easy way to do high, low and band pass filtering for any signal
- State "TODO"       from              [2017-07-14 Fri 14:36]

* 17JUL15 Did experiments but didn't collect much data because fishes were too old (8 days)
** More two-photon experiments: oscillattion-hunting failed
- Start: [[file:ahrensexpt.org::*17JUL15%20fish01_osc00][17JUL15 fish01_osc00]]
* 17JUL16 Did experiments and collected some interesting data
** More two-photon experiments: waist area and forebrain oscillations
- Start: [[file:ahrensexpt.org::*17JUL16%20fish00_osc00][17JUL16 fish00_osc00]]
* 17JUL17 Analysed and took down notes for all the data I collected so far
** [master 8788d4b] started analysing all my data files and combined projects.org into ahrensnotes.org
** TODO Don't downsample the ephys data! Space the imaging data further apart!
SCHEDULED: <2017-07-18 Tue>
- State "TODO"       from              [2017-07-17 Mon 23:01]
** TODO Look at [[file:ahrensexpt.org::*17JUL16%20fish01_osc04][17JUL16 fish01_osc04]]
SCHEDULED: <2017-07-18 Tue>
- State "TODO"       from              [2017-07-17 Mon 23:01]
** TODO Clean up my ipython notebook -- some cells I never run and some cells I run but not necessary
SCHEDULED: <2017-07-18 Tue>
- State "TODO"       from              [2017-07-17 Mon 23:02]
